# sqlDesign说明文档

## 数据库设计-移动运营商业务数据库设计与实现

## 操作

1. 对某个用户所有套餐的查询，2s441ms![查询所有](images/查询所有.png)

2. 订购套餐立即生效，2s838ms![订购套餐立即生效](images/订购立即.png)

3. 订购套餐下月生效，2s308ms![订购套餐下月生效](images/订购下月.png)

4. 取消套餐立即生效，2s460ms![取消套餐立即生效](images/取消立即.png)

5. 取消套餐下月生效，2s472ms![取消套餐下月生效](images/取消下月.png)

6. 一次通话资费生成，2s528ms![一次通话资费生成](images/通话.png)

7. 流量资费生成，2s881ms![流量费用生成](images/流量.png)

8. 短信资费生成，3s142ms![短信费用生成](images/短信.png)

## 优化方案

1. 没有利用数据库本身的函数如sum, max等，用Java逻辑操作大大增加了时间复杂度

2. 没有加入索引，导致查询和更新速度较慢

3. 可能对现实中操作的复杂缺乏足够考虑，可能有与现实预期偏差的情况

4. 在设计中因为对资费问题的考虑不周，导致为了实现方便在多个资费记录表中多加了名为money_this_time的column，与之间money的column有功能重合和数据冗余之处，可以改进为只记录当次消费

5. 数据库不符合BCNF，可以进一步优化减少冗余信息

## 数据库ER图

 ER图
 ![数据库ER图](images/ER.png)